{"ast":null,"code":"import _classCallCheck from \"/Users/taimoorjaved/writers-blocks/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/taimoorjaved/writers-blocks/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/taimoorjaved/writers-blocks/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/taimoorjaved/writers-blocks/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/taimoorjaved/writers-blocks/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/taimoorjaved/writers-blocks/client/src/homepage.js\";\nimport React, { Component } from 'react';\nimport logo from \"./logo.svg\";\nimport { Link } from 'react-router-dom';\nimport './homepage.css';\n\nvar homepage =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(homepage, _Component);\n\n  function homepage() {\n    var _this;\n\n    _classCallCheck(this, homepage);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(homepage).call(this));\n\n    _this.onAddItem = function (updateVal) {\n      _this.setState(function (state) {\n        var stories = state.stories.concat(updateVal);\n        return {\n          stories: stories,\n          value: {}\n        };\n      });\n    };\n\n    _this.state = {\n      value: {},\n      stories: []\n    };\n    return _this;\n  }\n\n  _createClass(homepage, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (typeof localStorage.homepage_mode === 'undefined') {\n        localStorage.homepage_mode = 0;\n      }\n\n      var tmpobj = {\n        \"mode\": localStorage.homepage_mode\n      };\n\n      if (localStorage.account && localStorage.token) {\n        tmpobj[\"account\"] = localStorage.account;\n        tmpobj[\"token\"] = localStorage.token;\n      }\n\n      var obj = JSON.stringify(tmpobj);\n      var updateStory = this.onAddItem;\n      var xhttp = new XMLHttpRequest();\n      xhttp.open(\"POST\", \"/api/story-homepage\", true);\n      xhttp.setRequestHeader(\"Content-Type\", \"application/json\");\n\n      xhttp.onreadystatechange = function () {\n        if (this.readyState === 4 && this.status === 200) {\n          var response = JSON.parse(this.responseText);\n          console.log(response);\n\n          if (response.status === 'okay') {\n            for (var i = 0; i < response.stories.length; i++) {\n              var story = response.stories[i];\n              updateStory(story);\n            }\n          }\n        }\n      };\n\n      xhttp.send(obj);\n    }\n  }, {\n    key: \"sortstories\",\n    value: function sortstories(mode) {\n      localStorage.homepage_mode = mode;\n      window.location.reload();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(\"div\", {\n        className: \"App\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"notification-bar\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"head\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        className: \"head1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }, React.createElement(Link, {\n        to: \"/\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        className: \"logo\",\n        href: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }, \"anthologist\")))), React.createElement(\"button\", {\n        className: \"user\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }, React.createElement(Link, {\n        to: \"/login\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        className: \"userimg\",\n        src: \"/picon.png\",\n        alt: \"No logo\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      })), \" \")), React.createElement(\"div\", {\n        className: \"top-buttons\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        className: \"submit-buttons_2\",\n        onClick: function onClick() {\n          return _this2.sortstories(0);\n        },\n        id: \"new-story\",\n        color: \"blue\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }, \"New\"), React.createElement(\"button\", {\n        className: \"submit-buttons_2\",\n        onClick: function onClick() {\n          return _this2.sortstories(1);\n        },\n        id: \"popular-stories\",\n        color: \"blue\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }, \"Popular\"), React.createElement(\"button\", {\n        className: \"submit-buttons_2\",\n        onClick: function onClick() {\n          return _this2.sortstories(2);\n        },\n        id: \"popular-stories\",\n        color: \"blue\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }, \"Following\"), React.createElement(\"button\", {\n        className: \"create-story\",\n        id: \"create-story-button\",\n        color: \"blue\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, React.createElement(Link, {\n        className: \"create-story\",\n        to: \"/new-story\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }, \" create a story\"))), React.createElement(\"div\", {\n        className: \"stories\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }, // Iterates over each element in the blocks array in the state and makes a span\n      this.state.stories.map(function (_ref) {\n        var id = _ref.id,\n            author = _ref.author,\n            username = _ref.username,\n            title = _ref.title,\n            views = _ref.views;\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 119\n          },\n          __self: this\n        }, React.createElement(\"a\", {\n          href: \"/story/\" + id.toString(),\n          className: \"storyBlock\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 121\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"titleText\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 122\n          },\n          __self: this\n        }, title.toString()), React.createElement(\"a\", {\n          href: \"/profile/\" + author.toString(),\n          className: \"author3\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 123\n          },\n          __self: this\n        }, username.toString()), React.createElement(\"a\", {\n          className: \"views\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 124\n          },\n          __self: this\n        }, views.toString(), \" Views\")));\n      })));\n    }\n  }]);\n\n  return homepage;\n}(Component);\n\nexport default homepage;","map":{"version":3,"sources":["/Users/taimoorjaved/writers-blocks/client/src/homepage.js"],"names":["React","Component","Link","homepage","onAddItem","updateVal","setState","state","stories","concat","value","localStorage","homepage_mode","tmpobj","account","token","obj","JSON","stringify","updateStory","xhttp","XMLHttpRequest","open","setRequestHeader","onreadystatechange","readyState","status","response","parse","responseText","console","log","i","length","story","send","mode","window","location","reload","sortstories","map","id","author","username","title","views","toString"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport logo from './logo.svg';\nimport {Link} from 'react-router-dom';\nimport './homepage.css';\n\n\nclass homepage extends Component {\n\n  constructor () {\n    super()\n    this.state = {\n      value: {},\n      stories: [],\n    }\n  }\n\n  onAddItem = ( updateVal ) => {\n      this.setState(state => {\n          const stories = state.stories.concat(updateVal);\n          return {\n              stories,\n              value:{},\n          };\n      })\n  };\n\n    componentDidMount( )\n    {\n        if ( typeof( localStorage.homepage_mode ) === 'undefined' )\n        {\n            localStorage.homepage_mode = 0;\n        }\n\n        var tmpobj = {\n            \"mode\": localStorage.homepage_mode\n        }\n\n        if ( localStorage.account && localStorage.token )\n        {\n            tmpobj[\"account\"] = localStorage.account\n            tmpobj[\"token\"] = localStorage.token\n        }\n\n        var obj = JSON.stringify(tmpobj)\n        const updateStory = this.onAddItem;\n\n        var xhttp = new XMLHttpRequest();\n        xhttp.open(\"POST\", \"/api/story-homepage\" , true);\n        xhttp.setRequestHeader(\"Content-Type\", \"application/json\");\n        xhttp.onreadystatechange = function ()\n        {\n            if ( this.readyState === 4 && this.status === 200 )\n            {\n                var response = JSON.parse(this.responseText);\n                console.log(response);\n\n                if ( response.status === 'okay' )\n                {\n                    for ( var i = 0; i < response.stories.length; i++ )\n                    {\n                        var story = response.stories[i]\n\n                        updateStory(story)\n                    }\n                }\n            }\n        };\n        xhttp.send(obj);\n    }\n\n\n    sortstories(mode){\n       localStorage.homepage_mode = mode\n        window.location.reload()\n    }\n\n  render() {\n    return (\n\n      <div className=\"App\">\n      \n        {/* Menu top bar */}\n        <div className=\"notification-bar\">\n\n        \n\n        {/* Anthologist logo */}\n        <div className=\"head\">\n          <h1 className=\"head1\">\n          <Link to='/'><a className=\"logo\" href>anthologist</a></Link>\n          </h1>\n        </div>\n        \n        {/* Search Bar */}\n        \n        <button className=\"user\"><Link to='/login'><img className=\"userimg\" src='/picon.png' alt = \"No logo\"></img></Link> </button>\n        </div>\n        \n        {/* Top buttons under menu bar */}\n        <div className='top-buttons'>\n        <button className=\"submit-buttons_2\" onClick={() => this.sortstories(0)} id =\"new-story\" color=\"blue\">New</button>\n        <button className=\"submit-buttons_2\" onClick={() => this.sortstories(1)} id =\"popular-stories\" color=\"blue\">Popular</button>\n        <button className=\"submit-buttons_2\" onClick={() => this.sortstories(2)} id =\"popular-stories\" color=\"blue\">Following</button>\n        <button className=\"create-story\" id =\"create-story-button\" color=\"blue\">\n            <Link className=\"create-story\" to='/new-story'> create a story</Link>\n        </button>\n        </div>\n\n\n      {/* Stories on the page */}\n      <div className='stories'>\n\n      {/* -----------ADD A STORY UNDER CONTRIBUTIONS DYNAMICALLY-------- */}\n                 \n            {\n                // Iterates over each element in the blocks array in the state and makes a span\n              this.state.stories.map(({id, author, username, title, views})=>{\n                return (\n                  <div>\n                      \n                      <a href={\"/story/\" + id.toString()} className='storyBlock' >\n                      <div className=\"titleText\">{title.toString()}</div>\n                      <a href={\"/profile/\" + author.toString()} className=\"author3\">{username.toString()}</a>\n                      <a className=\"views\">{views.toString()} Views</a>\n                      </a>\n                      \n                      \n                  </div>\n                )\n              })\n            }\n            \n              {/* ------------------------------------------------------------------------ */}\n\n        {\n     /* <span className='story-cover1'>STORY 1</span>\n        <span className='story-cover2'>STORY 2</span>\n        <span className='story-cover3'> STORY 3</span>\n        <span className='story-cover4'>STORY 4</span>\n\n        <span className='story-cover5'>STORY 5</span>\n        <span className='story-cover6'>STORY 6</span>\n        <span className='story-cover7'> STORY 7</span>\n        <span className='story-cover8'>STORY 8</span>\n\n        <span className='story-cover9'>STORY 9</span>\n        <span className='story-cover10'>STORY 10</span>\n        <span className='story-cover11'> STORY 11</span>\n        <span className='story-cover12'>STORY 12</span> */}\n        \n\n      </div>\n\n\n\n\n      </div>\n    );\n  }\n}\n\nexport default homepage;\n"]},"metadata":{},"sourceType":"module"}